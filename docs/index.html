<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>XIT NOKIA CONFIG - Updated</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <div class="logo">
    <img src="https://i.postimg.cc/65dG39Rq/IMG-20251112-014845-420.jpg" alt="Logo" />
  </div>

  <h1>SPEEDxLIVE
    MOD</h1>

  <div class="generate-box" id="generateBox">‚Äì Press Generate ‚Äì</div>
  <button class="btn" id="generateBtn">GENERATE KEY</button>
  <button class="btn" id="copyBtn">COPY KEY</button>

  <div class="key-box" id="keyBox"></div>
  <div class="small" id="statusBox"></div>

  <div class="telegram-box">
    <p>‚ù§Ô∏è Any Problem? Join Telegram!</p>
    <button class="telegram-btn" onclick="window.open('https://t.me/+CDQ5PWvl-hoxMjE1', '_blank')">Join Now</button>
  </div>
</div>

<script>
  // Generate Key button logic
  async function generateKey() {
    const generateBox = document.getElementById('generateBox');
    const keyBox = document.getElementById('keyBox');
    const statusBox = document.getElementById('statusBox');

    generateBox.textContent = '‚è≥ Generating...';
    statusBox.textContent = 'Sending request to key server...';
    keyBox.innerHTML = '';

    const payload = {
      api_key: "partner-alpha-token-xyZ12",
      options: { duration: "12" }
    };

    try {
      const resp = await fetch("https://keygenapi.vercel.app/keygen", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      const text = await resp.text();
      let data;
      try {
        data = JSON.parse(text);
      } catch (e) {
        data = text;
      }

      let displayed;
      if (data && typeof data === 'object') {
        if (data.key) displayed = data.key;
        else if (data.token) displayed = data.token;
        else if (data.result && typeof data.result === 'string') displayed = data.result;
        else displayed = JSON.stringify(data);
      } else {
        displayed = String(data);
      }

      keyBox.innerHTML = 'üîë Your Key: <b>' + displayed + '</b>';
      statusBox.textContent = resp.ok ? '‚úÖ Key generated' : '‚ö†Ô∏è Server returned an error (HTTP ' + resp.status + ')';

    } catch (err) {
      console.error(err);
      keyBox.innerHTML = '‚ö†Ô∏è Failed to generate key.';
      statusBox.textContent = 'Error: ' + (err.message || String(err));
    } finally {
      generateBox.textContent = '‚Äì Press Generate ‚Äì';
    }
  }

  // Copy Key button logic
  function copyKey() {
    const keyBox = document.getElementById('keyBox');
    const text = keyBox.innerText || keyBox.textContent || '';
    const cleaned = text.replace(/^üîë\s*Your\s*Key:\s*/, '').trim();
    if (!cleaned) {
      alert('‚ö†Ô∏è Please generate a key first!');
      return;
    }
    navigator.clipboard.writeText(cleaned).then(() => {
      alert('‚úÖ Key copied to clipboard!');
    }).catch(() => {
      alert('‚ö†Ô∏è Copy failed. Try manually.');
    });
  }

  document.getElementById('generateBtn').addEventListener('click', generateKey);
  document.getElementById('copyBtn').addEventListener('click', copyKey);
</script>
</body>
</html>